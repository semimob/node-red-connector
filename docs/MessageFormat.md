# Message Format
This document describes JSON message format to communicate with semlimes Server.

## Common attributes of the JSON message

| Name | Description |
| --- | --- |
| `AuthToken` | **[Required]** The user authenticated token obtained when the user sign-ins semilimes. |
| `ConversationID` | Identifier of the destination conversation to send the message. |
| `TypeID` | Unique type identifier of messages, such as: text message, HTML message, file message, form message, calendar message, etc. |
| `Type` | Categorize messages by but not limited to these ones: `chat`, `client` and `server` |
| `Body` | Plain text content of the message. |

When the server receives messages, it removes `AuthToken` attribute, adds 3 attributes `MessageID`, `SenderID` and `UnixTime` to the messages and sends it to the destination conversation’s members, including the sender:

| Name | Description |
| --- | --- |
| `MessageID` | Unique ID of the message, generated by the server. |
| `SenderID` | User identifier of the sender, specified by the server. |
| `UnixTime` | Arrived timestamp of the message set by the server in UNIX millisecond. |

If the ConversationID attribute is omitted, ReceiverID can be provided to indicate the conversation between the sender and the receiver as the destination conversation to send the message

| Name | Description |
| --- | --- |
| `ReceiverID` | User identifier of the receiver. |

## Chat messages

### Quote message format
Attribute `ReplyMessage` attribute is used to store the quoted message.

```
{
  “MessageID”: “<MessageID>”,
  ...
  “ReplyMessage”: {
    “MessageID”: “<Quoted-MessageID>”,
    “Body”: “<Quoted-message-body>”,
    ...
  }
}
```

### React message format
Chat messages can contains reacts of users in `React` attribute in this structure:

```
{
  “MessageID”: “<MessageID>”,
  ...
  “React”: {
    “<ReactType1>”: [
      “<UserID of user 1>”,
      “<UserID of user 1>”,		// A user can react multiple times.
      “<UserID of user 2>”,
      ...	
    ],
    “<ReactType2>”: [
      “<UserID of user 2>”,
      “<UserID of user 3>”,
      ...	
    ]
  }
}
```

